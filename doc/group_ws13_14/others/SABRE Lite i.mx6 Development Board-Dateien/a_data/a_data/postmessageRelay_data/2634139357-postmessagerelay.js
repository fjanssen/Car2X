var f=this,g=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b};Math.random();var h=function(a,b){var c=a.split("."),d=f;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b};var m=function(a){return-1!=k.indexOf(a)};Math.random();var k=f.navigator?f.navigator.userAgent:"";var n=m("Opera")||m("OPR"),p=m("Trident")||m("MSIE"),r=m("Gecko")&&!m("WebKit")&&!(m("Trident")||m("MSIE")),s=m("WebKit"),t=s&&m("Mobile");(function(){var a="",b;if(n&&f.opera)return a=f.opera.version,"function"==g(a)?a():a;r?b=/rv\:([^\);]+)(\)|;)/:p?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:s&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(k))?a[1]:"");return p&&(b=(b=f.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a})();var u;u=!1;var v=k;v&&(-1!=v.indexOf("Firefox")||-1!=v.indexOf("Camino")||-1!=v.indexOf("iPhone")||-1!=v.indexOf("iPod")||-1!=v.indexOf("iPad")||-1!=v.indexOf("Chrome")||-1!=v.indexOf("Android")||-1!=v.indexOf("Safari")&&(u=!0));var w=u;var y=function(a){var b=window;if(t&&w&&b){b.focus();var c=0,d=null,d=b.setInterval(function(){a.closed||5==c?b.clearInterval(d):(a.close(),c++)},150)}else a.close()};var z,A=function(a){a=a||[];for(var b=[],c=0,d=a.length;c<d;++c){var e=String(a[c]||"");e&&b.push(e)}if(!b.length)return null;z?z.reset.call(z):z=shindig.sha1();z.update.call(z,b.join(" "));return z.digestString.call(z).toLowerCase()},C=function(a,b,c){this.i=String(a||"");this.e=String(b||"");this.a=String(c||"");this.d={};this.g=this.k=this.f=this.h="";this.c=null};
C.prototype.evaluate=function(){var a={},b="";try{b=String(document.cookie||"")}catch(c){}for(var b=b.split("; ").join(";").split(";"),d=0,e=b.length;d<e;++d){var l=b[d],x=l.indexOf("=");-1!=x?a[l.substr(0,x)]=l.substr(x+1):a[l]=null}this.d=a;if(this.d.SID)if(this.e=this.e.split(".")[0].split("@")[0],a="",a=0==this.i.indexOf("https://")?"SAPISID":"APISID",this.f=String(this.d[a]||""))if(a="",a=0==gadgets.rpc.getOrigin(String(window.location.href)).indexOf("https://")?"SAPISID":"APISID",this.h=String(this.d[a]||
"")){b=String(this.d.LSOLH||"").split(":");d=b.length;if(1==d||4==d)this.k=b[0];if(3==d||4==d)a=String(b[d-3]||""),b=String(b[d-1]||""),(d=A([a,this.h]).substr(0,4))&&d==b&&(this.g=a);this.a&&(a=this.a.indexOf("."),-1!=a&&(a=this.a.substr(0,a)||"",this.a=a+"."+A([this.f,this.i,this.e,this.k,this.g,a]).substr(0,4)));a=A([this.f,this.i,this.e,this.a]);this.a&&(a=a+"."+this.a);this.c=a}else this.c="";else this.c=""};
var D=function(a,b,c){a=new C(a,b,c);a.evaluate();return a},F=function(a,b,c){c=c||E(this);var d=null;if(a){a=String(a);var e=a.indexOf(".");-1!=e&&(d=a.substr(e+1))}b=D(c,b,d).c;if(null==a||""==a)a=b==a;else if(null==b||b.length!=a.length)a=!1;else{d=c=0;for(e=a.length;d<e;++d)c|=a.charCodeAt(d)^b.charCodeAt(d);a=0==c}return a},G=function(a,b,c){c=c||E(this);c=D(c);if(String(a)!=c.c)throw Error("Unauthorized request");b=String(b);a=parseInt(b,10);String(a)==b&&0<=a?(b=c.g)?(b=b.split("|"),a=b.length<=
a?null:b[a]||null):a=null:a=null;return a},E=function(a){a=String(a.origin||"");if(!a)throw Error("RPC has no origin.");return a};h("checkSessionState",F);h("getVersionInfo",G);var H,I,J,K,L,M,N=window,O=(window.location.href||N.location.href).match(/.*(\?|#|&)usegapi=([^&#]+)/)||[];
"1"===decodeURIComponent(O[O.length-1]||"")?(J=function(a,b,c,d,e,l){H.send(b,e,d,l||gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)},K=function(a,b){H.register(a,b,gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)},L=function(a){var b=gapi.iframes.makeWhiteListIframesFilter([a.substr(0,a.indexOf("?"))]);J("..","oauth2callback",gadgets.rpc.getAuthToken(".."),void 0,a,b)},I=function(){P()},M=function(){J("..","oauth2relayReady",gadgets.rpc.getAuthToken(".."));K("check_session_state",Q);K("get_versioninfo",R)}):
(J=function(a,b,c,d,e){gadgets.rpc.call(a,b+":"+c,d,e)},K=function(a,b){gadgets.rpc.register(a,b)},L=function(a){gadgets.rpc.getTargetOrigin("..")==gadgets.rpc.getOrigin(a)&&J("..","oauth2callback",gadgets.rpc.getAuthToken(".."),void 0,a)},I=function(){M()},M=function(){J("..","oauth2relayReady",gadgets.rpc.getAuthToken(".."));K("check_session_state",F);K("get_versioninfo",G)});
var P=function(){var a=M;window.gapi.load("gapi.iframes",function(){H=gapi.iframes.getContext().getParentIframe();a()})},S=function(a){window.setTimeout(function(){L(a)},1)},Q=function(a){var b,c;a&&(b=a.session_state,c=a.client_id);return F(b,c,H.getOrigin())},R=function(a){return G(a.xapisidHash,a.sessionIndex,H.getOrigin())};h("oauth2callback",S);
h("oauth2verify",function(a,b){var c=window.open("javascript:void(0);",a),d;if(c&&!c.closed&&(d=c.oauth2callbackUrl))return window.b=window.b||{},window.j=window.j||window.setTimeout,window.setTimeout=function(a,b){try{var d=a,B=!1,q;a=function(){if(!B){B=!0;try{window.b[String(q)]=void 0,delete window.b[String(q)]}catch(a){}return d.call(this)}};var T=c.setTimeout(a,b);q=window.j(a,b);window.b[String(q)]=T;return q}catch(U){}return window.j(a,b)},window.l=window.l||window.clearTimeout,window.clearTimeout=
function(a){try{var b=window.b[String(a)];b&&c.clearTimeout(b)}catch(d){}try{window.b[String(a)]=void 0,delete window.b[String(a)]}catch(B){}window.l(a)},S(String(d)),"keep_open"!=b&&y(c),!0;c&&!c.closed&&y(c);return!1});window.addEventListener?window.addEventListener("load",I,!1):window.attachEvent("onload",I);
